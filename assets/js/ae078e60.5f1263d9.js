"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2557],{38(e,r,n){n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"t-lib/t-motor-group","title":"T_MotorGroup API","description":"The TMotorGroup class simplifies controlling multiple TMotor objects as a unified group. It provides convenient methods to apply control commands, configurations, and PID constants across all motors simultaneously.","source":"@site/docs/t-lib/t-motor-group.md","sourceDirName":"t-lib","slug":"/t-lib/t-motor-group","permalink":"/T_Lib/docs/t-lib/t-motor-group","draft":false,"unlisted":false,"editUrl":"https://github.com/Brody9185/T_Lib/tree/main/website/docs/t-lib/t-motor-group.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"T_Lib Documentation","permalink":"/T_Lib/docs/t-lib/intro"},"next":{"title":"T_Motor API","permalink":"/T_Lib/docs/t-lib/t-motor"}}');var o=n(4848),s=n(8453);const i={},l="T_MotorGroup API",a={},d=[{value:"Constructors",id:"constructors",level:2},{value:"From Shared Pointers",id:"from-shared-pointers",level:3},{value:"From Raw Pointers",id:"from-raw-pointers",level:3},{value:"From Motor Objects",id:"from-motor-objects",level:3},{value:"From Ports (Convenience Constructor)",id:"from-ports-convenience-constructor",level:3},{value:"Examples",id:"examples",level:3},{value:"Core Control",id:"core-control",level:2},{value:"setTargetRPM",id:"settargetrpm",level:3},{value:"setTargetPercent",id:"settargetpercent",level:3},{value:"stop",id:"stop",level:3},{value:"resetPositions",id:"resetpositions",level:3},{value:"setBrakeMode",id:"setbrakemode",level:3},{value:"Example",id:"example",level:3},{value:"PID Configuration",id:"pid-configuration",level:2},{value:"setDualConstants",id:"setdualconstants",level:3},{value:"setLowConstants",id:"setlowconstants",level:3},{value:"setHighConstants",id:"sethighconstants",level:3},{value:"setStartI",id:"setstarti",level:3},{value:"setPIDEnabled",id:"setpidenabled",level:3},{value:"Example",id:"example-1",level:3},{value:"Slew Control",id:"slew-control",level:2},{value:"setSlewLimitEnabled",id:"setslewlimitenabled",level:3},{value:"setSlewRate",id:"setslewrate",level:3},{value:"Example",id:"example-2",level:3},{value:"Load and Torque Control",id:"load-and-torque-control",level:2},{value:"setLoadCompensation (3 overloads)",id:"setloadcompensation-3-overloads",level:3},{value:"setMinTorque (3 overloads)",id:"setmintorque-3-overloads",level:3},{value:"Example",id:"example-3",level:3},{value:"Status and Telemetry",id:"status-and-telemetry",level:2},{value:"getAverageRPM",id:"getaveragerpm",level:3},{value:"isAnySpinning",id:"isanyspinning",level:3},{value:"getMotors",id:"getmotors",level:3},{value:"size",id:"size",level:3},{value:"Example",id:"example-4",level:3},{value:"Complete Example: Arcade Drive",id:"complete-example-arcade-drive",level:2},{value:"Complete Example: Subsystem Tank Drive",id:"complete-example-subsystem-tank-drive",level:2}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"t_motorgroup-api",children:"T_MotorGroup API"})}),"\n",(0,o.jsxs)(r.p,{children:["The ",(0,o.jsx)(r.code,{children:"T_MotorGroup"})," class simplifies controlling multiple ",(0,o.jsx)(r.code,{children:"T_Motor"})," objects as a unified group. It provides convenient methods to apply control commands, configurations, and PID constants across all motors simultaneously."]}),"\n",(0,o.jsx)(r.h2,{id:"constructors",children:"Constructors"}),"\n",(0,o.jsx)(r.p,{children:"T_MotorGroup supports several construction patterns for maximum flexibility:"}),"\n",(0,o.jsx)(r.h3,{id:"from-shared-pointers",children:"From Shared Pointers"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"// From initializer list\r\nexplicit T_MotorGroup(std::initializer_list<std::shared_ptr<T_Motor>> list);\r\n\r\n// From vector\r\nexplicit T_MotorGroup(const std::vector<std::shared_ptr<T_Motor>>& list);\r\nexplicit T_MotorGroup(std::vector<std::shared_ptr<T_Motor>>&& list);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"from-raw-pointers",children:"From Raw Pointers"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"// From initializer list of pointers\r\nexplicit T_MotorGroup(std::initializer_list<T_Motor*> list);\r\n\r\n// From vector of pointers\r\nexplicit T_MotorGroup(const std::vector<T_Motor*>& list);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"from-motor-objects",children:"From Motor Objects"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"// From initializer list of motor objects\r\nexplicit T_MotorGroup(std::initializer_list<T_Motor> list);\r\n\r\n// From vector of motor objects\r\nexplicit T_MotorGroup(const std::vector<T_Motor>& list);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"from-ports-convenience-constructor",children:"From Ports (Convenience Constructor)"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"// Create motors from port numbers automatically\r\nexplicit T_MotorGroup(\r\n    std::initializer_list<int> ports, \r\n    pros::v5::MotorGears gearset = util::Aliases::Blue\r\n);\r\n\r\nexplicit T_MotorGroup(\r\n    const std::vector<int>& ports, \r\n    pros::v5::MotorGears gearset = util::Aliases::Blue\r\n);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"examples",children:"Examples"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:'#include "T_Lib/api.hpp"\r\n\r\n// Create motors and add to group via shared pointers\r\nauto motor1 = std::make_shared<T_Lib::T_Motor>(1);\r\nauto motor2 = std::make_shared<T_Lib::T_Motor>(2);\r\nT_MotorGroup group({motor1, motor2});\r\n\r\n// Create group directly from port numbers\r\nT_MotorGroup drivebase({1, 2, 3, 4});\r\n\r\n// Create group from raw pointers\r\nT_Lib::T_Motor m1(1), m2(2), m3(3);\r\nT_MotorGroup group({&m1, &m2, &m3});\n'})}),"\n",(0,o.jsx)(r.h2,{id:"core-control",children:"Core Control"}),"\n",(0,o.jsx)(r.h3,{id:"settargetrpm",children:"setTargetRPM"}),"\n",(0,o.jsx)(r.p,{children:"Set the target RPM for all motors in the group."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setTargetRPM(double rpm);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"settargetpercent",children:"setTargetPercent"}),"\n",(0,o.jsx)(r.p,{children:"Set the target power percentage for all motors in the group."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setTargetPercent(double percent);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"stop",children:"stop"}),"\n",(0,o.jsx)(r.p,{children:"Stop all motors in the group."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void stop();\n"})}),"\n",(0,o.jsx)(r.h3,{id:"resetpositions",children:"resetPositions"}),"\n",(0,o.jsx)(r.p,{children:"Reset the encoder position to zero for all motors."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void resetPositions();\n"})}),"\n",(0,o.jsx)(r.h3,{id:"setbrakemode",children:"setBrakeMode"}),"\n",(0,o.jsx)(r.p,{children:"Set the brake mode for all motors in the group."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setBrakeMode(pros::v5::MotorBrake mode);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"example",children:"Example"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"T_MotorGroup left_side({1, 2, 3});\r\nT_MotorGroup right_side({4, 5, 6});\r\n\r\n// Control both groups\r\nleft_side.setTargetRPM(600);\r\nright_side.setTargetRPM(-600);  // Opposite direction\r\n\r\n// Stop all motors\r\nleft_side.stop();\r\nright_side.stop();\r\n\r\n// Set brake mode\r\nleft_side.setBrakeMode(T_Lib::util::Aliases::Hold);\n"})}),"\n",(0,o.jsx)(r.h2,{id:"pid-configuration",children:"PID Configuration"}),"\n",(0,o.jsx)(r.h3,{id:"setdualconstants",children:"setDualConstants"}),"\n",(0,o.jsx)(r.p,{children:"Set dual-speed PID constants for all motors (4 or 8 parameter versions)."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setDualConstants(\r\n    double kvLow, double kpLow, \r\n    double kvHigh, double kpHigh\r\n);\r\n\r\nvoid setDualConstants(\r\n    double kvLow, double kpLow, double kiLow, double kdLow,\r\n    double kvHigh, double kpHigh, double kiHigh, double kdHigh\r\n);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"setlowconstants",children:"setLowConstants"}),"\n",(0,o.jsx)(r.p,{children:"Set low-speed PID constants for all motors."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setLowConstants(double kvLow, double kpLow);\r\nvoid setLowConstants(double kvLow, double kpLow, double kiLow, double kdLow);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"sethighconstants",children:"setHighConstants"}),"\n",(0,o.jsx)(r.p,{children:"Set high-speed PID constants for all motors."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setHighConstants(double kvHigh, double kpHigh);\r\nvoid setHighConstants(double kvHigh, double kpHigh, double kiHigh, double kdHigh);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"setstarti",children:"setStartI"}),"\n",(0,o.jsx)(r.p,{children:"Initialize the integral error term for all motors."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setStartI(double startIntegral);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"setpidenabled",children:"setPIDEnabled"}),"\n",(0,o.jsx)(r.p,{children:"Enable or disable PID control for all motors."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setPIDEnabled(bool enabled);\r\nbool isAnyPIDEnabled() const;      // True if any motor has PID enabled\r\nbool areAllPIDEnabled() const;     // True if all motors have PID enabled\n"})}),"\n",(0,o.jsx)(r.h3,{id:"example-1",children:"Example"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:'T_MotorGroup drivetrain({1, 2, 3, 4, 5, 6});\r\n\r\n// Configure PID for entire drivetrain\r\ndrivetrain.setDualConstants(\r\n    0.05, 0.1,      // Low speed\r\n    0.05, 0.05      // High speed\r\n);\r\n\r\n// Disable PID for a specific test\r\ndrivetrain.setPIDEnabled(false);\r\n\r\n// Check PID status\r\nif (drivetrain.areAllPIDEnabled()) {\r\n    printf("All motors have PID enabled\\n");\r\n}\n'})}),"\n",(0,o.jsx)(r.h2,{id:"slew-control",children:"Slew Control"}),"\n",(0,o.jsx)(r.h3,{id:"setslewlimitenabled",children:"setSlewLimitEnabled"}),"\n",(0,o.jsx)(r.p,{children:"Enable slew rate limiting for all motors."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setSlewLimitEnabled(bool SlewOn);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"setslewrate",children:"setSlewRate"}),"\n",(0,o.jsx)(r.p,{children:"Set the slew rate for all motors."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setSlewRate(double Slew);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"example-2",children:"Example"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"drivetrain.setSlewLimitEnabled(true);\r\ndrivetrain.setSlewRate(300.0);  // Limit speed change to 300 RPM per iteration\n"})}),"\n",(0,o.jsx)(r.h2,{id:"load-and-torque-control",children:"Load and Torque Control"}),"\n",(0,o.jsx)(r.h3,{id:"setloadcompensation-3-overloads",children:"setLoadCompensation (3 overloads)"}),"\n",(0,o.jsx)(r.p,{children:"Enable load compensation for all motors in the group."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setLoadCompensation(bool enabled);\r\nvoid setLoadCompensation(bool enabled, double kBoost);\r\nvoid setLoadCompensation(bool enabled, double kBoost, int threshold);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"setmintorque-3-overloads",children:"setMinTorque (3 overloads)"}),"\n",(0,o.jsx)(r.p,{children:"Set minimum torque for all motors."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"void setMinTorque(bool enabled);\r\nvoid setMinTorque(bool enabled, int minMv);\r\nvoid setMinTorque(bool enabled, int minMv, int minLowMv);\n"})}),"\n",(0,o.jsx)(r.h3,{id:"example-3",children:"Example"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"drivetrain.setLoadCompensation(true, 5.0, 15);\r\ndrivetrain.setMinTorque(true, 1200, 600);\n"})}),"\n",(0,o.jsx)(r.h2,{id:"status-and-telemetry",children:"Status and Telemetry"}),"\n",(0,o.jsx)(r.h3,{id:"getaveragerpm",children:"getAverageRPM"}),"\n",(0,o.jsx)(r.p,{children:"Get the average RPM across all motors in the group."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"double getAverageRPM() const;\n"})}),"\n",(0,o.jsx)(r.h3,{id:"isanyspinning",children:"isAnySpinning"}),"\n",(0,o.jsx)(r.p,{children:"Check if any motor in the group is currently spinning at target."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"bool isAnySpinning() const;\n"})}),"\n",(0,o.jsx)(r.h3,{id:"getmotors",children:"getMotors"}),"\n",(0,o.jsx)(r.p,{children:"Get access to the underlying motor collection."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"const std::vector<std::shared_ptr<T_Motor>>& getMotors() const;\n"})}),"\n",(0,o.jsx)(r.h3,{id:"size",children:"size"}),"\n",(0,o.jsx)(r.p,{children:"Get the number of motors in the group."}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:"size_t size() const;\n"})}),"\n",(0,o.jsx)(r.h3,{id:"example-4",children:"Example"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:'printf("Average RPM: %f\\n", drivetrain.getAverageRPM());\r\n\r\nif (drivetrain.isAnySpinning()) {\r\n    printf("One or more motors are spinning\\n");\r\n}\r\n\r\nprintf("Group has %zu motors\\n", drivetrain.size());\r\n\r\n// Access individual motors\r\nfor (const auto& motor : drivetrain.getMotors()) {\r\n    printf("Motor temperature: %f C\\n", motor->getTemperature());\r\n}\n'})}),"\n",(0,o.jsx)(r.h2,{id:"complete-example-arcade-drive",children:"Complete Example: Arcade Drive"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:'#include "main.h"\r\n#include "T_Lib/api.hpp"\r\n\r\nvoid opcontrol() {\r\n    // Create left and right motor groups\r\n    T_MotorGroup left_side({1, 2, 3});\r\n    T_MotorGroup right_side({4, 5, 6});\r\n    \r\n    // Configure motor groups\r\n    left_side.setDualConstants(0.05, 0.1, 0.05, 0.05);\r\n    right_side.setDualConstants(0.05, 0.1, 0.05, 0.05);\r\n    \r\n    left_side.setBrakeMode(T_Lib::util::Aliases::Hold);\r\n    right_side.setBrakeMode(T_Lib::util::Aliases::Hold);\r\n    \r\n    left_side.setSlewLimitEnabled(true);\r\n    right_side.setSlewLimitEnabled(true);\r\n    left_side.setSlewRate(400.0);\r\n    right_side.setSlewRate(400.0);\r\n    \r\n    left_side.setLoadCompensation(true, 5.0);\r\n    right_side.setLoadCompensation(true, 5.0);\r\n    \r\n    pros::Controller master(pros::E_CONTROLLER_MASTER);\r\n    \r\n    while (true) {\r\n        // Arcade control scheme\r\n        int forward = master.get_analog(ANALOG_LEFT_Y);   // Forward/backward\r\n        int turn = master.get_analog(ANALOG_RIGHT_X);     // Turn\r\n        \r\n        // Calculate power for each side\r\n        int left_power = forward + turn;\r\n        int right_power = forward - turn;\r\n        \r\n        // Apply power\r\n        left_side.setTargetPercent(left_power);\r\n        right_side.setTargetPercent(right_power);\r\n        \r\n        // Telemetry\r\n        printf("L: %f, R: %f\\n", left_side.getAverageRPM(), right_side.getAverageRPM());\r\n        \r\n        pros::delay(20);\r\n    }\r\n}\n'})}),"\n",(0,o.jsx)(r.h2,{id:"complete-example-subsystem-tank-drive",children:"Complete Example: Subsystem Tank Drive"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-cpp",children:'#include "main.h"\r\n#include "T_Lib/api.hpp"\r\n\r\nclass Drivetrain {\r\nprivate:\r\n    T_MotorGroup left_motors;\r\n    T_MotorGroup right_motors;\r\n    \r\npublic:\r\n    Drivetrain(std::initializer_list<int> left_ports, \r\n               std::initializer_list<int> right_ports)\r\n        : left_motors(left_ports), right_motors(right_ports) {\r\n        \r\n        // Configure both sides\r\n        left_motors.setDualConstants(0.05, 0.1, 0.05, 0.05);\r\n        right_motors.setDualConstants(0.05, 0.1, 0.05, 0.05);\r\n        \r\n        left_motors.setBrakeMode(T_Lib::util::Aliases::Hold);\r\n        right_motors.setBrakeMode(T_Lib::util::Aliases::Hold);\r\n    }\r\n    \r\n    void arcadeDrive(double forward, double turn) {\r\n        left_motors.setTargetPercent(forward + turn);\r\n        right_motors.setTargetPercent(forward - turn);\r\n    }\r\n    \r\n    void stop() {\r\n        left_motors.stop();\r\n        right_motors.stop();\r\n    }\r\n};\r\n\r\nvoid opcontrol() {\r\n    Drivetrain drive({1, 2, 3}, {4, 5, 6});\r\n    pros::Controller master(pros::E_CONTROLLER_MASTER);\r\n    \r\n    while (true) {\r\n        int forward = master.get_analog(ANALOG_LEFT_Y);\r\n        int turn = master.get_analog(ANALOG_RIGHT_X);\r\n        \r\n        drive.arcadeDrive(forward, turn);\r\n        \r\n        pros::delay(20);\r\n    }\r\n}\n'})})]})}function p(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453(e,r,n){n.d(r,{R:()=>i,x:()=>l});var t=n(6540);const o={},s=t.createContext(o);function i(e){const r=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);